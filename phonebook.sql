--------------------------------------------------------
--  File created - Wednesday-February-10-2016   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence CONTACTS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PHONEUSER"."CONTACTS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 161 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence EMAIL_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PHONEUSER"."EMAIL_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 121 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence PHONE_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "PHONEUSER"."PHONE_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 121 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table CONTACTS
--------------------------------------------------------

  CREATE TABLE "PHONEUSER"."CONTACTS" 
   (	"IDCONTACT" NUMBER(10,0), 
	"FIRSTNAME" VARCHAR2(20 BYTE), 
	"LASTNAME" VARCHAR2(20 BYTE), 
	"MIDDLENAME" VARCHAR2(20 BYTE), 
	"BIRTHDATE" DATE, 
	"ADDRESS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table EMAIL
--------------------------------------------------------

  CREATE TABLE "PHONEUSER"."EMAIL" 
   (	"IDCONTACT" NUMBER(10,0), 
	"TYPE" VARCHAR2(10 BYTE), 
	"EMAIL" VARCHAR2(100 BYTE), 
	"DEFAULTEMAIL" CHAR(1 BYTE), 
	"IDEMAIL" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table PHONE
--------------------------------------------------------

  CREATE TABLE "PHONEUSER"."PHONE" 
   (	"IDCONTACT" NUMBER(10,0), 
	"TYPE" VARCHAR2(10 BYTE), 
	"DEFAULTPHONE" CHAR(1 BYTE), 
	"PHONENUMBER" VARCHAR2(20 BYTE), 
	"IDPHONE" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into PHONEUSER.CONTACTS
SET DEFINE OFF;
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (150,'Viktor','Korogoda','Ivanovich',to_date('15-06-92','DD-MM-RR'),'Minsk, Frolikova');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (151,'Ivan','Ivanov','Ivanovich',to_date('03-04-90','DD-MM-RR'),'Minsk, Nezavisimisty 100');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (152,'Pop','Popov','Popovich',to_date('28-05-93','DD-MM-RR'),'Brest, Pushkina 25');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (153,'Silvester','Stallone','Algerdovich',to_date('13-02-95','DD-MM-RR'),'Minsk, Yakuba Kolas 26');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (154,'Sergei','Vorobei','Sergeevich',to_date('13-03-70','DD-MM-RR'),'Vitebsk');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (155,'Andrei','Andreev','Olegovich',to_date('09-02-96','DD-MM-RR'),'Minsk');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (156,'Bill','Geits','Ivanovich',to_date('03-05-60','DD-MM-RR'),'Minsk');
Insert into PHONEUSER.CONTACTS (IDCONTACT,FIRSTNAME,LASTNAME,MIDDLENAME,BIRTHDATE,ADDRESS) values (157,'Ivan','Trubov','Petrovich',to_date('30-01-78','DD-MM-RR'),'Grodno');
REM INSERTING into PHONEUSER.EMAIL
SET DEFINE OFF;
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (150,'home','victor1506@mail.ru','N',95);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (150,'work','victorvictorvictor@pochta.com','Y',96);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (151,'home','ivanivanov@mail.ru','N',97);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (151,'work','ivanov@mail.ru','Y',98);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (152,'home','poppopovich@mail.ru','Y',99);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (153,'home','stallonethebest@mail.ru','Y',100);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (154,'work','vorobei@mail.ru','N',101);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (154,'home','vorobei@gmail.com','Y',102);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (155,'work','375446789876','Y',103);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (156,'work','billy@mail.ru','Y',104);
Insert into PHONEUSER.EMAIL (IDCONTACT,TYPE,EMAIL,DEFAULTEMAIL,IDEMAIL) values (157,'work','trubov@mail.ru','Y',105);
REM INSERTING into PHONEUSER.PHONE
SET DEFINE OFF;
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (150,'home','N','+375445965277',101);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (150,'work','Y','+375123456789',102);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (151,'home','Y','375332564445',103);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (152,'home','N','3751622563258',104);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (152,'work','Y','3751621452748',105);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (153,'home','Y','375445896521',106);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (154,'mobile','N','375445865214',107);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (154,'home','Y','375295263252',108);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (155,'home','Y','375447678928',109);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (156,'home','Y','375392225566',110);
Insert into PHONEUSER.PHONE (IDCONTACT,TYPE,DEFAULTPHONE,PHONENUMBER,IDPHONE) values (157,'home','Y','375442563899',111);
--------------------------------------------------------
--  Constraints for Table EMAIL
--------------------------------------------------------

  ALTER TABLE "PHONEUSER"."EMAIL" MODIFY ("IDCONTACT" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PHONE
--------------------------------------------------------

  ALTER TABLE "PHONEUSER"."PHONE" MODIFY ("TYPE" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."PHONE" MODIFY ("IDCONTACT" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."PHONE" MODIFY ("PHONENUMBER" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table CONTACTS
--------------------------------------------------------

  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("IDCONTACT" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("ADDRESS" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("BIRTHDATE" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("MIDDLENAME" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("LASTNAME" NOT NULL ENABLE);
  ALTER TABLE "PHONEUSER"."CONTACTS" MODIFY ("FIRSTNAME" NOT NULL ENABLE);
--------------------------------------------------------
--  DDL for Trigger CONTACTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PHONEUSER"."CONTACTS_TRG" 
BEFORE INSERT ON CONTACTS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "PHONEUSER"."CONTACTS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger EMAIL_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PHONEUSER"."EMAIL_TRG" 
BEFORE INSERT ON EMAIL 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.IDEMAIL IS NULL THEN
      SELECT EMAIL_SEQ.NEXTVAL INTO :NEW.IDEMAIL FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "PHONEUSER"."EMAIL_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger PHONE_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "PHONEUSER"."PHONE_TRG" 
BEFORE INSERT ON PHONE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.IDPHONE IS NULL THEN
      SELECT PHONE_SEQ.NEXTVAL INTO :NEW.IDPHONE FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "PHONEUSER"."PHONE_TRG" ENABLE;
